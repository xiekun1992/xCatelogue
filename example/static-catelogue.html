<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body id="b">
	<h1>title test</h1>
	<h2>this is 1</h2>
	<h3>this is 1.1</h3>
	<h3>this is 1.2</h3>
	<h3>this is 1.3</h3>
	<h1>title test</h1>
	<h2>this is 2</h2>
	<h3>this is 2.1</h3>
	<h3>this is 2.2</h3>
	<h3>this is 2.3</h3>
	<h1>title test</h1>
	<h2>this is 3</h2>
	<h3>this is 3.1</h3>
	<h3>this is 3.2</h3>
	<h3>this is 3.3</h3>
	<script src="../build/xcatelogue.js"></script>
	<script>
	var seekForHierarchy = function(element, tree){
		if(element instanceof HTMLElement){
			var node = {self: element, children: [], parent: tree};
			tree.children.push(node);

			var titleTags = ["H1", "H2", "H3", "H4", "H5", "H6"];
			var tagName = element.tagName;
			var tagNameIndex = titleTags.indexOf(tagName);
			
			var nextElement = element.nextElementSibling;
			if(nextElement){
				var pos = titleTags.indexOf(nextElement.tagName);
				if(pos == -1){ //非标题标签
					return ;
				}else if(pos > tagNameIndex){ //子标题
					// node.children.push(nextElement);
					seekForHierarchy(nextElement, node);
				}else if(pos == tagNameIndex){ //同级标题
					// peers.push(nextElement);
					seekForHierarchy(nextElement, tree);
				}else{ //父级标题
					console.log(1)
					var parentNode = tree.parent;
					while(parentNode.self.tagName != nextElement.tagName){
						parentNode = parentNode.parent;
					}
					seekForHierarchy(nextElement, parentNode);
				}
			}
		}
	}
	var tree = [];
	seekForHierarchy(document.body.children[0], {self: document.body, children: tree, parent: null});
	console.log(tree)
	</script>
</body>
</html>